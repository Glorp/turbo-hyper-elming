<html>

<head>
  <title>Ting</title>
  <script src="resources/elm-runtime.js"></script>
  <script src="build/Graphecs.js"></script>
  <script src="build/Ting.js"></script>
</head>

<body/>

<script type="text/javascript">
  var ting = Elm.fullscreen(Elm.Ting, {inn: null});

    function thingety(req) {
        ting.ports.inn.send(null);
        if (!req) return;

        var xhr = new XMLHttpRequest();
        xhr.open(req.verb, req.url, true);
        xhr.onload = function(){
            ting.ports.inn.send({respText: xhr.responseText,
                                 status: xhr.status,
                                 statusText: xhr.statusText,
                                 headers : xhr.getAllResponseHeaders()});
        }
        xhr.send();
    }

    ting.ports.out.subscribe(thingety);
</script>
</html>
